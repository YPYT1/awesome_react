# å—æ§ç»„ä»¶è¯¦è§£

## å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†å…¨é¢æŒæ¡ï¼š

- å—æ§ç»„ä»¶çš„æ¦‚å¿µå’ŒåŸç†
- å„ç§è¡¨å•å…ƒç´ çš„å—æ§å®ç°
- å—æ§ç»„ä»¶çš„ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯
- è¡¨å•éªŒè¯çš„å®Œæ•´æµç¨‹
- æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- React 19ä¸­çš„è¡¨å•å¤„ç†æ–°ç‰¹æ€§

## ç¬¬ä¸€éƒ¨åˆ†ï¼šå—æ§ç»„ä»¶åŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶

å—æ§ç»„ä»¶æ˜¯æŒ‡è¡¨å•å…ƒç´ çš„å€¼å®Œå…¨ç”±React Stateæ§åˆ¶çš„ç»„ä»¶ã€‚

```jsx
// å—æ§ç»„ä»¶çš„å®šä¹‰
function ControlledInput() {
  const [value, setValue] = useState('');
  
  return (
    <input
      value={value}  // å€¼ç”±Stateæ§åˆ¶
      onChange={e => setValue(e.target.value)}  // é€šè¿‡äº‹ä»¶æ›´æ–°State
    />
  );
}

// éå—æ§ç»„ä»¶ï¼ˆå¯¹æ¯”ï¼‰
function UncontrolledInput() {
  return (
    <input defaultValue="åˆå§‹å€¼" />  // å€¼ç”±DOMè‡ªå·±ç®¡ç†
  );
}

// ä¸ºä»€ä¹ˆå«"å—æ§"ï¼Ÿ
// å› ä¸ºå€¼å®Œå…¨å—Reactæ§åˆ¶ï¼ŒDOMåªæ˜¯å±•ç¤º
```

### 1.2 å—æ§ç»„ä»¶çš„å·¥ä½œæµç¨‹

```jsx
function ControlledFlow() {
  const [value, setValue] = useState('Hello');
  
  // æ•°æ®æµï¼š
  // 1. State (value = "Hello")
  // 2. â†“ æ¸²æŸ“åˆ°DOM
  // 3. <input value="Hello" />
  // 4. ç”¨æˆ·è¾“å…¥ "Hi"
  // 5. onChangeäº‹ä»¶è§¦å‘
  // 6. setValue("Hi")
  // 7. Stateæ›´æ–° (value = "Hi")
  // 8. é‡æ–°æ¸²æŸ“
  // 9. <input value="Hi" />
  
  const handleChange = (e) => {
    const newValue = e.target.value;
    console.log('æ—§å€¼:', value);
    console.log('æ–°å€¼:', newValue);
    setValue(newValue);
  };
  
  return (
    <div>
      <input value={value} onChange={handleChange} />
      <p>å½“å‰å€¼: {value}</p>
    </div>
  );
}
```

### 1.3 å—æ§ç»„ä»¶çš„ä¼˜åŠ¿

```jsx
function ControlledAdvantages() {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  
  // ä¼˜åŠ¿1ï¼šå®æ—¶éªŒè¯
  const usernameError = username && username.length < 3 ? 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦' : '';
  
  // ä¼˜åŠ¿2ï¼šæ ¼å¼åŒ–è¾“å…¥
  const handleUsernameChange = (e) => {
    let value = e.target.value;
    
    // è‡ªåŠ¨è½¬å°å†™
    value = value.toLowerCase();
    
    // åªå…è®¸å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿
    value = value.replace(/[^a-z0-9_]/g, '');
    
    // é™åˆ¶é•¿åº¦
    if (value.length <= 20) {
      setUsername(value);
    }
  };
  
  // ä¼˜åŠ¿3ï¼šæ¡ä»¶ç¦ç”¨
  const handlePasswordChange = (e) => {
    const value = e.target.value;
    
    // åªåœ¨ç”¨æˆ·åæœ‰æ•ˆæ—¶æ‰å…è®¸è¾“å…¥å¯†ç 
    if (username.length >= 3) {
      setPassword(value);
    }
  };
  
  // ä¼˜åŠ¿4ï¼šå®æ—¶æ¯”è¾ƒ
  const passwordMatch = password && confirmPassword && password === confirmPassword;
  const passwordMismatch = password && confirmPassword && password !== confirmPassword;
  
  // ä¼˜åŠ¿5ï¼šåŠ¨æ€æç¤º
  const getPasswordStrength = () => {
    if (!password) return '';
    if (password.length < 6) return 'å¼±';
    if (password.length < 10) return 'ä¸­ç­‰';
    return 'å¼º';
  };
  
  return (
    <form>
      <div>
        <label>ç”¨æˆ·å:</label>
        <input
          value={username}
          onChange={handleUsernameChange}
          placeholder="3-20ä¸ªå­—ç¬¦"
        />
        {usernameError && <span className="error">{usernameError}</span>}
        <span className="info">{username.length}/20</span>
      </div>
      
      <div>
        <label>å¯†ç :</label>
        <input
          type="password"
          value={password}
          onChange={handlePasswordChange}
          disabled={username.length < 3}
          placeholder="è‡³å°‘6ä¸ªå­—ç¬¦"
        />
        {password && (
          <span className="strength">å¼ºåº¦: {getPasswordStrength()}</span>
        )}
      </div>
      
      <div>
        <label>ç¡®è®¤å¯†ç :</label>
        <input
          type="password"
          value={confirmPassword}
          onChange={e => setConfirmPassword(e.target.value)}
          placeholder="å†æ¬¡è¾“å…¥å¯†ç "
        />
        {passwordMatch && <span className="success">âœ“ å¯†ç åŒ¹é…</span>}
        {passwordMismatch && <span className="error">âœ— å¯†ç ä¸åŒ¹é…</span>}
      </div>
      
      <button
        type="submit"
        disabled={!username || !password || !passwordMatch}
      >
        æ³¨å†Œ
      </button>
    </form>
  );
}
```

## ç¬¬äºŒéƒ¨åˆ†ï¼šå„ç§è¡¨å•å…ƒç´ çš„å—æ§å®ç°

### 2.1 inputæ–‡æœ¬æ¡†

```jsx
function ControlledTextInputs() {
  const [text, setText] = useState('');
  const [number, setNumber] = useState(0);
  const [date, setDate] = useState('');
  const [time, setTime] = useState('');
  const [email, setEmail] = useState('');
  const [url, setUrl] = useState('');
  const [search, setSearch] = useState('');
  const [tel, setTel] = useState('');
  const [color, setColor] = useState('#000000');
  const [range, setRange] = useState(50);
  
  return (
    <div className="form-grid">
      <div>
        <label>text:</label>
        <input
          type="text"
          value={text}
          onChange={e => setText(e.target.value)}
          placeholder="æ–‡æœ¬"
        />
      </div>
      
      <div>
        <label>number:</label>
        <input
          type="number"
          value={number}
          onChange={e => setNumber(Number(e.target.value))}
          min="0"
          max="100"
        />
      </div>
      
      <div>
        <label>date:</label>
        <input
          type="date"
          value={date}
          onChange={e => setDate(e.target.value)}
        />
      </div>
      
      <div>
        <label>time:</label>
        <input
          type="time"
          value={time}
          onChange={e => setTime(e.target.value)}
        />
      </div>
      
      <div>
        <label>email:</label>
        <input
          type="email"
          value={email}
          onChange={e => setEmail(e.target.value)}
        />
      </div>
      
      <div>
        <label>url:</label>
        <input
          type="url"
          value={url}
          onChange={e => setUrl(e.target.value)}
        />
      </div>
      
      <div>
        <label>search:</label>
        <input
          type="search"
          value={search}
          onChange={e => setSearch(e.target.value)}
        />
      </div>
      
      <div>
        <label>tel:</label>
        <input
          type="tel"
          value={tel}
          onChange={e => setTel(e.target.value)}
        />
      </div>
      
      <div>
        <label>color:</label>
        <input
          type="color"
          value={color}
          onChange={e => setColor(e.target.value)}
        />
      </div>
      
      <div>
        <label>range ({range}):</label>
        <input
          type="range"
          value={range}
          onChange={e => setRange(Number(e.target.value))}
          min="0"
          max="100"
        />
      </div>
    </div>
  );
}
```

### 2.2 textarea

```jsx
function ControlledTextarea() {
  const [content, setContent] = useState('');
  const [wordCount, setWordCount] = useState(0);
  const [charCount, setCharCount] = useState(0);
  const maxLength = 500;
  
  const handleChange = (e) => {
    const value = e.target.value;
    
    if (value.length <= maxLength) {
      setContent(value);
      setCharCount(value.length);
      setWordCount(value.trim().split(/\s+/).filter(Boolean).length);
    }
  };
  
  const remaining = maxLength - charCount;
  const progress = (charCount / maxLength) * 100;
  
  return (
    <div>
      <textarea
        value={content}
        onChange={handleChange}
        placeholder="è¯·è¾“å…¥å†…å®¹..."
        rows={10}
        cols={50}
      />
      
      <div className="textarea-info">
        <span>å­—ç¬¦: {charCount}/{maxLength}</span>
        <span>å•è¯: {wordCount}</span>
        <span>å‰©ä½™: {remaining}</span>
        
        <div className="progress-bar">
          <div
            className="progress-fill"
            style={{
              width: `${progress}%`,
              background: progress > 90 ? '#e74c3c' : '#28a745'
            }}
          />
        </div>
      </div>
    </div>
  );
}
```

### 2.3 selectä¸‹æ‹‰æ¡†

```jsx
function ControlledSelect() {
  const [single, setSingle] = useState('');
  const [multiple, setMultiple] = useState([]);
  
  // å•é€‰
  const handleSingleChange = (e) => {
    setSingle(e.target.value);
  };
  
  // å¤šé€‰
  const handleMultipleChange = (e) => {
    const options = Array.from(e.target.selectedOptions);
    const values = options.map(opt => opt.value);
    setMultiple(values);
  };
  
  return (
    <div>
      <div>
        <label>å•é€‰ä¸‹æ‹‰æ¡†:</label>
        <select value={single} onChange={handleSingleChange}>
          <option value="">è¯·é€‰æ‹©</option>
          <option value="apple">è‹¹æœ</option>
          <option value="banana">é¦™è•‰</option>
          <option value="orange">æ©™å­</option>
        </select>
        <p>é€‰æ‹©: {single || 'æœªé€‰æ‹©'}</p>
      </div>
      
      <div>
        <label>å¤šé€‰ä¸‹æ‹‰æ¡†:</label>
        <select
          multiple
          value={multiple}
          onChange={handleMultipleChange}
          size={5}
        >
          <option value="apple">è‹¹æœ</option>
          <option value="banana">é¦™è•‰</option>
          <option value="orange">æ©™å­</option>
          <option value="grape">è‘¡è„</option>
          <option value="watermelon">è¥¿ç“œ</option>
        </select>
        <p>é€‰æ‹©: {multiple.join(', ') || 'æœªé€‰æ‹©'}</p>
      </div>
    </div>
  );
}
```

### 2.4 checkboxå¤é€‰æ¡†

```jsx
function ControlledCheckbox() {
  const [checked, setChecked] = useState(false);
  const [selected, setSelected] = useState([]);
  
  const options = ['é˜…è¯»', 'è¿åŠ¨', 'éŸ³ä¹', 'æ—…è¡Œ', 'æ‘„å½±'];
  
  // å•ä¸ªcheckbox
  const handleSingleCheck = (e) => {
    setChecked(e.target.checked);
  };
  
  // å¤šä¸ªcheckbox
  const handleOptionChange = (option) => {
    setSelected(prev =>
      prev.includes(option)
        ? prev.filter(item => item !== option)
        : [...prev, option]
    );
  };
  
  // å…¨é€‰/å–æ¶ˆå…¨é€‰
  const toggleAll = () => {
    setSelected(prev =>
      prev.length === options.length ? [] : [...options]
    );
  };
  
  const allSelected = selected.length === options.length;
  const someSelected = selected.length > 0 && selected.length < options.length;
  
  return (
    <div>
      <div>
        <label>
          <input
            type="checkbox"
            checked={checked}
            onChange={handleSingleCheck}
          />
          åŒæ„æ¡æ¬¾
        </label>
      </div>
      
      <div>
        <h4>é€‰æ‹©çˆ±å¥½:</h4>
        
        <label>
          <input
            type="checkbox"
            checked={allSelected}
            ref={input => {
              if (input) {
                input.indeterminate = someSelected;
              }
            }}
            onChange={toggleAll}
          />
          å…¨é€‰
        </label>
        
        {options.map(option => (
          <label key={option}>
            <input
              type="checkbox"
              checked={selected.includes(option)}
              onChange={() => handleOptionChange(option)}
            />
            {option}
          </label>
        ))}
        
        <p>å·²é€‰æ‹©: {selected.join(', ') || 'æ— '}</p>
      </div>
    </div>
  );
}
```

### 2.5 radioå•é€‰æ¡†

```jsx
function ControlledRadio() {
  const [selected, setSelected] = useState('');
  const [paymentMethod, setPaymentMethod] = useState('alipay');
  
  const options = ['è‹¹æœ', 'é¦™è•‰', 'æ©™å­'];
  const paymentMethods = [
    { id: 'alipay', name: 'æ”¯ä»˜å®', icon: 'ğŸ’°' },
    { id: 'wechat', name: 'å¾®ä¿¡æ”¯ä»˜', icon: 'ğŸ’š' },
    { id: 'card', name: 'é“¶è¡Œå¡', icon: 'ğŸ’³' }
  ];
  
  return (
    <div>
      <div>
        <h4>é€‰æ‹©æ°´æœ:</h4>
        {options.map(option => (
          <label key={option}>
            <input
              type="radio"
              name="fruit"
              value={option}
              checked={selected === option}
              onChange={e => setSelected(e.target.value)}
            />
            {option}
          </label>
        ))}
        <p>é€‰æ‹©: {selected || 'æœªé€‰æ‹©'}</p>
      </div>
      
      <div>
        <h4>æ”¯ä»˜æ–¹å¼:</h4>
        <div className="payment-methods">
          {paymentMethods.map(method => (
            <label
              key={method.id}
              className={`payment-option ${paymentMethod === method.id ? 'selected' : ''}`}
            >
              <input
                type="radio"
                name="payment"
                value={method.id}
                checked={paymentMethod === method.id}
                onChange={e => setPaymentMethod(e.target.value)}
              />
              <span className="icon">{method.icon}</span>
              <span className="name">{method.name}</span>
            </label>
          ))}
        </div>
      </div>
    </div>
  );
}
```

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¡¨å•éªŒè¯

### 3.1 å®æ—¶éªŒè¯

```jsx
function RealTimeValidation() {
  const [formData, setFormData] = useState({
    username: '',
    email: '',
    password: '',
    confirmPassword: ''
  });
  
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});
  
  // éªŒè¯è§„åˆ™
  const validators = {
    username: (value) => {
      if (!value) return 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º';
      if (value.length < 3) return 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦';
      if (value.length > 20) return 'ç”¨æˆ·åæœ€å¤š20ä¸ªå­—ç¬¦';
      if (!/^[a-zA-Z0-9_]+$/.test(value)) return 'åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿';
      return '';
    },
    
    email: (value) => {
      if (!value) return 'é‚®ç®±ä¸èƒ½ä¸ºç©º';
      if (!/\S+@\S+\.\S+/.test(value)) return 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
      return '';
    },
    
    password: (value) => {
      if (!value) return 'å¯†ç ä¸èƒ½ä¸ºç©º';
      if (value.length < 8) return 'å¯†ç è‡³å°‘8ä¸ªå­—ç¬¦';
      if (!/[A-Z]/.test(value)) return 'å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯';
      if (!/[a-z]/.test(value)) return 'å¯†ç å¿…é¡»åŒ…å«å°å†™å­—æ¯';
      if (!/[0-9]/.test(value)) return 'å¯†ç å¿…é¡»åŒ…å«æ•°å­—';
      if (!/[!@#$%^&*]/.test(value)) return 'å¯†ç å¿…é¡»åŒ…å«ç‰¹æ®Šå­—ç¬¦';
      return '';
    },
    
    confirmPassword: (value) => {
      if (!value) return 'è¯·ç¡®è®¤å¯†ç ';
      if (value !== formData.password) return 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´';
      return '';
    }
  };
  
  // å¤„ç†å˜åŒ–
  const handleChange = (field) => (e) => {
    const value = e.target.value;
    
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
    
    // å¦‚æœå­—æ®µå·²è¢«è®¿é—®è¿‡ï¼Œç«‹å³éªŒè¯
    if (touched[field]) {
      const error = validators[field](value);
      setErrors(prev => ({
        ...prev,
        [field]: error
      }));
    }
  };
  
  // å¤„ç†å¤±ç„¦
  const handleBlur = (field) => () => {
    setTouched(prev => ({
      ...prev,
      [field]: true
    }));
    
    const error = validators[field](formData[field]);
    setErrors(prev => ({
      ...prev,
      [field]: error
    }));
  };
  
  // æäº¤éªŒè¯
  const handleSubmit = (e) => {
    e.preventDefault();
    
    // æ ‡è®°æ‰€æœ‰å­—æ®µä¸ºå·²è®¿é—®
    const allTouched = {};
    Object.keys(formData).forEach(key => {
      allTouched[key] = true;
    });
    setTouched(allTouched);
    
    // éªŒè¯æ‰€æœ‰å­—æ®µ
    const allErrors = {};
    Object.keys(formData).forEach(field => {
      const error = validators[field](formData[field]);
      if (error) {
        allErrors[field] = error;
      }
    });
    setErrors(allErrors);
    
    // æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
    if (Object.keys(allErrors).length === 0) {
      console.log('æäº¤æ•°æ®:', formData);
      alert('æ³¨å†ŒæˆåŠŸï¼');
    }
  };
  
  return (
    <form onSubmit={handleSubmit} className="validation-form">
      <div className="form-field">
        <label>ç”¨æˆ·å:</label>
        <input
          value={formData.username}
          onChange={handleChange('username')}
          onBlur={handleBlur('username')}
          className={touched.username && errors.username ? 'error' : ''}
        />
        {touched.username && errors.username && (
          <span className="error-message">{errors.username}</span>
        )}
      </div>
      
      <div className="form-field">
        <label>é‚®ç®±:</label>
        <input
          type="email"
          value={formData.email}
          onChange={handleChange('email')}
          onBlur={handleBlur('email')}
          className={touched.email && errors.email ? 'error' : ''}
        />
        {touched.email && errors.email && (
          <span className="error-message">{errors.email}</span>
        )}
      </div>
      
      <div className="form-field">
        <label>å¯†ç :</label>
        <input
          type="password"
          value={formData.password}
          onChange={handleChange('password')}
          onBlur={handleBlur('password')}
          className={touched.password && errors.password ? 'error' : ''}
        />
        {touched.password && errors.password && (
          <span className="error-message">{errors.password}</span>
        )}
      </div>
      
      <div className="form-field">
        <label>ç¡®è®¤å¯†ç :</label>
        <input
          type="password"
          value={formData.confirmPassword}
          onChange={handleChange('confirmPassword')}
          onBlur={handleBlur('confirmPassword')}
          className={touched.confirmPassword && errors.confirmPassword ? 'error' : ''}
        />
        {touched.confirmPassword && errors.confirmPassword && (
          <span className="error-message">{errors.confirmPassword}</span>
        )}
      </div>
      
      <button type="submit">æ³¨å†Œ</button>
    </form>
  );
}
```

### 3.2 å¼‚æ­¥éªŒè¯

```jsx
function AsyncValidation() {
  const [username, setUsername] = useState('');
  const [checking, setChecking] = useState(false);
  const [available, setAvailable] = useState(null);
  
  // é˜²æŠ–æ£€æŸ¥ç”¨æˆ·å
  useEffect(() => {
    if (!username || username.length < 3) {
      setAvailable(null);
      return;
    }
    
    setChecking(true);
    const timer = setTimeout(async () => {
      try {
        const response = await fetch(`/api/check-username?username=${username}`);
        const data = await response.json();
        setAvailable(data.available);
      } catch (error) {
        console.error('æ£€æŸ¥å¤±è´¥', error);
      } finally {
        setChecking(false);
      }
    }, 500);
    
    return () => clearTimeout(timer);
  }, [username]);
  
  return (
    <div>
      <label>ç”¨æˆ·å:</label>
      <input
        value={username}
        onChange={e => setUsername(e.target.value)}
        placeholder="è¾“å…¥ç”¨æˆ·å"
      />
      
      {checking && <span className="checking">æ£€æŸ¥ä¸­...</span>}
      {!checking && available === true && (
        <span className="success">âœ“ ç”¨æˆ·åå¯ç”¨</span>
      )}
      {!checking && available === false && (
        <span className="error">âœ— ç”¨æˆ·åå·²è¢«ä½¿ç”¨</span>
      )}
    </div>
  );
}
```

## ç¬¬å››éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–

### 4.1 å¤§å‹è¡¨å•ä¼˜åŒ–

```jsx
// é—®é¢˜ï¼šæ¯ä¸ªå­—æ®µå˜åŒ–éƒ½ä¼šé‡æ–°æ¸²æŸ“æ•´ä¸ªè¡¨å•
function UnoptimizedLargeForm() {
  const [formData, setFormData] = useState({
    field1: '', field2: '', field3: '', /* ...100ä¸ªå­—æ®µ */
  });
  
  const handleChange = (field) => (e) => {
    setFormData(prev => ({
      ...prev,
      [field]: e.target.value
    }));
  };
  
  console.log('Formæ¸²æŸ“');  // æ¯æ¬¡è¾“å…¥éƒ½æ¸²æŸ“
  
  return (
    <form>
      {/* 100ä¸ªå­—æ®µ... */}
    </form>
  );
}

// è§£å†³æ–¹æ¡ˆï¼šæ‹†åˆ†ä¸ºç‹¬ç«‹ç»„ä»¶
const FormField = React.memo(function FormField({ 
  label, 
  value, 
  onChange, 
  error 
}) {
  console.log('FormFieldæ¸²æŸ“:', label);
  
  return (
    <div className="form-field">
      <label>{label}</label>
      <input value={value} onChange={onChange} />
      {error && <span className="error">{error}</span>}
    </div>
  );
});

function OptimizedLargeForm() {
  const [field1, setField1] = useState('');
  const [field2, setField2] = useState('');
  const [field3, setField3] = useState('');
  // æ¯ä¸ªå­—æ®µç‹¬ç«‹çš„State
  
  return (
    <form>
      <FormField label="å­—æ®µ1" value={field1} onChange={e => setField1(e.target.value)} />
      <FormField label="å­—æ®µ2" value={field2} onChange={e => setField2(e.target.value)} />
      <FormField label="å­—æ®µ3" value={field3} onChange={e => setField3(e.target.value)} />
      {/* field1å˜åŒ–æ—¶ï¼Œåªæœ‰FormField1é‡æ–°æ¸²æŸ“ */}
    </form>
  );
}
```

## ç¬¬äº”éƒ¨åˆ†ï¼šReact 19æ–°ç‰¹æ€§

### 5.1 Server Actionsè¡¨å•

```jsx
'use server';

async function createUser(formData) {
  const data = {
    name: formData.get('name'),
    email: formData.get('email')
  };
  
  await db.users.create(data);
  revalidatePath('/users');
  
  return { success: true };
}

// Client Component
'use client';

import { useActionState } from 'react';

function ServerActionForm() {
  const [state, formAction, isPending] = useActionState(createUser, null);
  
  return (
    <form action={formAction}>
      <input name="name" required />
      <input name="email" type="email" required />
      <button disabled={isPending}>
        {isPending ? 'æäº¤ä¸­...' : 'æäº¤'}
      </button>
      {state?.success && <p>åˆ›å»ºæˆåŠŸï¼</p>}
    </form>
  );
}
```

## ç»ƒä¹ é¢˜

### åŸºç¡€ç»ƒä¹ 

1. å®ç°å„ç§å—æ§è¡¨å•å…ƒç´ 
2. åˆ›å»ºå®æ—¶è¡¨å•éªŒè¯
3. å®ç°å¤šä¸ªè¡¨å•å…ƒç´ çš„è”åŠ¨

### è¿›é˜¶ç»ƒä¹ 

1. åˆ›å»ºå¤æ‚çš„è¡¨å•éªŒè¯ç³»ç»Ÿ
2. å®ç°è¡¨å•çš„è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
3. ä¼˜åŒ–å¤§å‹è¡¨å•æ€§èƒ½

### é«˜çº§ç»ƒä¹ 

1. ä½¿ç”¨React 19 Server Actions
2. å®ç°è¡¨å•çš„æ’¤é”€/é‡åš
3. åˆ›å»ºåŠ¨æ€è¡¨å•ç”Ÿæˆå™¨

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†å—æ§ç»„ä»¶çš„å®Œæ•´çŸ¥è¯†ã€‚å—æ§ç»„ä»¶æ˜¯Reactè¡¨å•å¤„ç†çš„æ ¸å¿ƒï¼ŒæŒæ¡å®ƒå¯¹æ„å»ºå¤æ‚è¡¨å•è‡³å…³é‡è¦ï¼ç»§ç»­å­¦ä¹ ï¼Œæˆä¸ºè¡¨å•å¤„ç†ä¸“å®¶ï¼
